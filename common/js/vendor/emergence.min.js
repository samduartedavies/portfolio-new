!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.emergence=t(e)}(this,function(e){"use strict";var t,n,o,i,r,s,c,d,a,l,f={},u=function(){},m=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|playbook|silk/i.test(navigator.userAgent)},h=function(e){var t=e.offsetWidth,n=e.offsetHeight,o=0,i=0;do{isNaN(e.offsetTop)||(o+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft)}while(null!==(e=e.offsetParent));return{width:t,height:n,top:o,left:i}},g=function(e){if(function(e){return null===e.offsetParent}(e))return!1;var t,o,i,r,f,u,m,g,w=h(e),v=function(e){var t,n;return e!==window?(t=e.clientWidth,n=e.clientHeight):(t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight),{width:t,height:n}}(n),p=function(e){return e!==window?{x:e.scrollLeft+h(e).left,y:e.scrollTop+h(e).top}:{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}(n),E=w.width,y=w.height,L=w.top,b=w.left;return t=L+y*s,o=b+E-E*s,i=L+y-y*s,r=b+E*s,f=p.y+c,u=p.x-d+v.width,m=p.y-a+v.height,g=p.x+l,t<m&&i>f&&r<u&&o>g},w=function(){t||(clearTimeout(t),t=setTimeout(function(){f.engage(),t=null},o))};return f.init=function(e){var t,f,h=function(e,t){return parseInt(e||t,10)};n=(e=e||{}).container||window,i=void 0===e.reset||e.reset,r=void 0===e.handheld||e.handheld,o=h(e.throttle,250),t=e.elemCushion,f=.15,s=parseFloat(t||f),c=h(e.offsetTop,0),d=h(e.offsetRight,0),a=h(e.offsetBottom,0),l=h(e.offsetLeft,0),u=e.callback||u,"querySelectorAll"in document?(m()&&r||!m())&&(document.documentElement.className+=" emergence",window.addEventListener?(window.addEventListener("load",w,!1),n.addEventListener("scroll",w,!1),n.addEventListener("resize",w,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&w()}),n.attachEvent("onscroll",w),n.attachEvent("onresize",w))):console.log("Emergence.js is not supported in this browser.")},f.engage=function(){for(var e,t=document.querySelectorAll("[data-emergence]"),n=t.length,o=0;o<n;o++)e=t[o],g(e)?(e.setAttribute("data-emergence","visible"),e.className=e.className,u(e,"visible")):!0===i?(e.setAttribute("data-emergence","hidden"),e.className=e.className,u(e,"reset")):!1===i&&u(e,"noreset");n||f.disengage()},f.disengage=function(){window.removeEventListener?(n.removeEventListener("scroll",w,!1),n.removeEventListener("resize",w,!1)):(n.detachEvent("onscroll",w),n.detachEvent("onresize",w)),clearTimeout(t)},f});